{"version":3,"file":"entrypoint-BIGpY6pM.js","sources":["../../../Client/src/entrypoints/entrypoint.ts"],"sourcesContent":["import { UMB_AUTH_CONTEXT } from \"@umbraco-cms/backoffice/auth\";\r\nimport type {\r\n  UmbEntryPointOnInit,\r\n  UmbEntryPointOnUnload,\r\n} from \"@umbraco-cms/backoffice/extension-api\";\r\nimport { client } from \"../api\";\r\n\r\n// load up the manifests here\r\nexport const onInit: UmbEntryPointOnInit = (_host, _extensionRegistry) => {\r\n  _host.consumeContext(UMB_AUTH_CONTEXT, (_auth) => {\r\n    if (!_auth) return;\r\n    const config = _auth.getOpenApiConfiguration();\r\n\r\n    client.setConfig({\r\n      baseUrl: config.base,\r\n      credentials: config.credentials,\r\n    });\r\n\r\n    client.interceptors.request.use(async (request, _options) => {\r\n      const token = await _auth.getLatestToken();\r\n      request.headers.set(\"Authorization\", `Bearer ${token}`);\r\n      return request;\r\n    });\r\n  });\r\n};\r\n\r\nexport const onUnload: UmbEntryPointOnUnload = (_host, _extensionRegistry) => {\r\n  console.log(\"Goodbye from my extension ðŸ‘‹\");\r\n};\r\n"],"names":["onInit","_host","_extensionRegistry","UMB_AUTH_CONTEXT","_auth","config","client","request","_options","token","onUnload"],"mappings":";;AAQO,MAAMA,IAA8B,CAACC,GAAOC,MAAuB;AACxE,EAAAD,EAAM,eAAeE,GAAkB,CAACC,MAAU;AAChD,QAAI,CAACA,EAAO;AACZ,UAAMC,IAASD,EAAM,wBAAA;AAErB,IAAAE,EAAO,UAAU;AAAA,MACf,SAASD,EAAO;AAAA,MAChB,aAAaA,EAAO;AAAA,IAAA,CACrB,GAEDC,EAAO,aAAa,QAAQ,IAAI,OAAOC,GAASC,MAAa;AAC3D,YAAMC,IAAQ,MAAML,EAAM,eAAA;AAC1B,aAAAG,EAAQ,QAAQ,IAAI,iBAAiB,UAAUE,CAAK,EAAE,GAC/CF;AAAA,IAAA,CACR;AAAA,EAAA,CACF;AACH,GAEaG,IAAkC,CAACT,GAAOC,MAAuB;AAC5E,UAAQ,IAAI,8BAA8B;AAC5C;"}